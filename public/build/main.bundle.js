/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{var t={7856:function(t){t.exports=function(){"use strict";var t=Object.hasOwnProperty,e=Object.setPrototypeOf,a=Object.isFrozen,n=Object.freeze,i=Object.seal,o=Object.create,r="undefined"!=typeof Reflect&&Reflect,l=r.apply,s=r.construct;l||(l=function(t,e,a){return t.apply(e,a)}),n||(n=function(t){return t}),i||(i=function(t){return t}),s||(s=function(t,e){return new(Function.prototype.bind.apply(t,[null].concat(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(e))))});var c,d=w(Array.prototype.forEach),u=w(Array.prototype.pop),m=w(Array.prototype.push),p=w(String.prototype.toLowerCase),f=w(String.prototype.match),h=w(String.prototype.replace),g=w(String.prototype.indexOf),y=w(String.prototype.trim),b=w(RegExp.prototype.test),v=(c=TypeError,function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return s(c,e)});function w(t){return function(e){for(var a=arguments.length,n=Array(a>1?a-1:0),i=1;i<a;i++)n[i-1]=arguments[i];return l(t,e,n)}}function A(t,n){e&&e(t,null);for(var i=n.length;i--;){var o=n[i];if("string"==typeof o){var r=p(o);r!==o&&(a(n)||(n[i]=r),o=r)}t[o]=!0}return t}function k(e){var a=o(null),n=void 0;for(n in e)l(t,e,[n])&&(a[n]=e[n]);return a}var T=n(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),x=n(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"]),_=n(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),S=n(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),$=n(["#text"]),D=n(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),L=n(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),R=n(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),E=n(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),I=i(/\{\{[\s\S]*|[\s\S]*\}\}/gm),M=i(/<%[\s\S]*|[\s\S]*%>/gm),O=i(/^data-[\-\w.\u00B7-\uFFFF]/),C=i(/^aria-[\-\w]+$/),N=i(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),F=i(/^(?:\w+script|data):/i),j=i(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function P(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var H=function(){return"undefined"==typeof window?null:window},U=function(t,e){if("object"!==(void 0===t?"undefined":z(t))||"function"!=typeof t.createPolicy)return null;var a=null,n="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(n)&&(a=e.currentScript.getAttribute(n));var i="dompurify"+(a?"#"+a:"");try{return t.createPolicy(i,{createHTML:function(t){return t}})}catch(t){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};return function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H(),a=function(e){return t(e)};if(a.version="2.2.3",a.removed=[],!e||!e.document||9!==e.document.nodeType)return a.isSupported=!1,a;var i=e.document,o=e.document,r=e.DocumentFragment,l=e.HTMLTemplateElement,s=e.Node,c=e.NodeFilter,w=e.NamedNodeMap,B=void 0===w?e.NamedNodeMap||e.MozNamedAttrMap:w,q=e.Text,W=e.Comment,G=e.DOMParser,V=e.trustedTypes;if("function"==typeof l){var K=o.createElement("template");K.content&&K.content.ownerDocument&&(o=K.content.ownerDocument)}var Y=U(V,i),X=Y&&Dt?Y.createHTML(""):"",Z=o,J=Z.implementation,Q=Z.createNodeIterator,tt=Z.getElementsByTagName,et=Z.createDocumentFragment,at=i.importNode,nt={};try{nt=k(o).documentMode?o.documentMode:{}}catch(t){}var it={};a.isSupported=J&&void 0!==J.createHTMLDocument&&9!==nt;var ot=I,rt=M,lt=O,st=C,ct=F,dt=j,ut=N,mt=null,pt=A({},[].concat(P(T),P(x),P(_),P(S),P($))),ft=null,ht=A({},[].concat(P(D),P(L),P(R),P(E))),gt=null,yt=null,bt=!0,vt=!0,wt=!1,At=!1,kt=!1,Tt=!1,xt=!1,_t=!1,St=!1,$t=!0,Dt=!1,Lt=!0,Rt=!0,Et=!1,It={},Mt=A({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","plaintext","script","style","svg","template","thead","title","video","xmp"]),Ot=null,Ct=A({},["audio","video","img","source","image","track"]),Nt=null,Ft=A({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),jt=null,zt=o.createElement("form"),Pt=function(t){jt&&jt===t||(t&&"object"===(void 0===t?"undefined":z(t))||(t={}),t=k(t),mt="ALLOWED_TAGS"in t?A({},t.ALLOWED_TAGS):pt,ft="ALLOWED_ATTR"in t?A({},t.ALLOWED_ATTR):ht,Nt="ADD_URI_SAFE_ATTR"in t?A(k(Ft),t.ADD_URI_SAFE_ATTR):Ft,Ot="ADD_DATA_URI_TAGS"in t?A(k(Ct),t.ADD_DATA_URI_TAGS):Ct,gt="FORBID_TAGS"in t?A({},t.FORBID_TAGS):{},yt="FORBID_ATTR"in t?A({},t.FORBID_ATTR):{},It="USE_PROFILES"in t&&t.USE_PROFILES,bt=!1!==t.ALLOW_ARIA_ATTR,vt=!1!==t.ALLOW_DATA_ATTR,wt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,At=t.SAFE_FOR_TEMPLATES||!1,kt=t.WHOLE_DOCUMENT||!1,_t=t.RETURN_DOM||!1,St=t.RETURN_DOM_FRAGMENT||!1,$t=!1!==t.RETURN_DOM_IMPORT,Dt=t.RETURN_TRUSTED_TYPE||!1,xt=t.FORCE_BODY||!1,Lt=!1!==t.SANITIZE_DOM,Rt=!1!==t.KEEP_CONTENT,Et=t.IN_PLACE||!1,ut=t.ALLOWED_URI_REGEXP||ut,At&&(vt=!1),St&&(_t=!0),It&&(mt=A({},[].concat(P($))),ft=[],!0===It.html&&(A(mt,T),A(ft,D)),!0===It.svg&&(A(mt,x),A(ft,L),A(ft,E)),!0===It.svgFilters&&(A(mt,_),A(ft,L),A(ft,E)),!0===It.mathMl&&(A(mt,S),A(ft,R),A(ft,E))),t.ADD_TAGS&&(mt===pt&&(mt=k(mt)),A(mt,t.ADD_TAGS)),t.ADD_ATTR&&(ft===ht&&(ft=k(ft)),A(ft,t.ADD_ATTR)),t.ADD_URI_SAFE_ATTR&&A(Nt,t.ADD_URI_SAFE_ATTR),Rt&&(mt["#text"]=!0),kt&&A(mt,["html","head","body"]),mt.table&&(A(mt,["tbody"]),delete gt.tbody),n&&n(t),jt=t)},Ht=function(t){m(a.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.outerHTML=X}},Ut=function(t,e){try{m(a.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){m(a.removed,{attribute:null,from:e})}e.removeAttribute(t)},Bt=function(t){var e=void 0,a=void 0;if(xt)t="<remove></remove>"+t;else{var n=f(t,/^[\r\n\t ]+/);a=n&&n[0]}var i=Y?Y.createHTML(t):t;try{e=(new G).parseFromString(i,"text/html")}catch(t){}if(!e||!e.documentElement){var r=(e=J.createHTMLDocument("")).body;r.parentNode.removeChild(r.parentNode.firstElementChild),r.outerHTML=i}return t&&a&&e.body.insertBefore(o.createTextNode(a),e.body.childNodes[0]||null),tt.call(e,kt?"html":"body")[0]},qt=function(t){return Q.call(t.ownerDocument||t,t,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,(function(){return c.FILTER_ACCEPT}),!1)},Wt=function(t){return!(t instanceof q||t instanceof W||"string"==typeof t.nodeName&&"string"==typeof t.textContent&&"function"==typeof t.removeChild&&t.attributes instanceof B&&"function"==typeof t.removeAttribute&&"function"==typeof t.setAttribute&&"string"==typeof t.namespaceURI)},Gt=function(t){return"object"===(void 0===s?"undefined":z(s))?t instanceof s:t&&"object"===(void 0===t?"undefined":z(t))&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},Vt=function(t,e,n){it[t]&&d(it[t],(function(t){t.call(a,e,n,jt)}))},Kt=function(t){var e=void 0;if(Vt("beforeSanitizeElements",t,null),Wt(t))return Ht(t),!0;if(f(t.nodeName,/[\u0080-\uFFFF]/))return Ht(t),!0;var n=p(t.nodeName);if(Vt("uponSanitizeElement",t,{tagName:n,allowedTags:mt}),("svg"===n||"math"===n)&&0!==t.querySelectorAll("p, br, form, table, h1, h2, h3, h4, h5, h6").length)return Ht(t),!0;if(!Gt(t.firstElementChild)&&(!Gt(t.content)||!Gt(t.content.firstElementChild))&&b(/<[/\w]/g,t.innerHTML)&&b(/<[/\w]/g,t.textContent))return Ht(t),!0;if(!mt[n]||gt[n]){if(Rt&&!Mt[n]&&"function"==typeof t.insertAdjacentHTML)try{var i=t.innerHTML;t.insertAdjacentHTML("AfterEnd",Y?Y.createHTML(i):i)}catch(t){}return Ht(t),!0}return"noscript"!==n&&"noembed"!==n||!b(/<\/no(script|embed)/i,t.innerHTML)?(At&&3===t.nodeType&&(e=t.textContent,e=h(e,ot," "),e=h(e,rt," "),t.textContent!==e&&(m(a.removed,{element:t.cloneNode()}),t.textContent=e)),Vt("afterSanitizeElements",t,null),!1):(Ht(t),!0)},Yt=function(t,e,a){if(Lt&&("id"===e||"name"===e)&&(a in o||a in zt))return!1;if(vt&&b(lt,e));else if(bt&&b(st,e));else{if(!ft[e]||yt[e])return!1;if(Nt[e]);else if(b(ut,h(a,dt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==g(a,"data:")||!Ot[t])if(wt&&!b(ct,h(a,dt,"")));else if(a)return!1}return!0},Xt=function(t){var e=void 0,n=void 0,i=void 0,o=void 0;Vt("beforeSanitizeAttributes",t,null);var r=t.attributes;if(r){var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ft};for(o=r.length;o--;){var s=e=r[o],c=s.name,d=s.namespaceURI;if(n=y(e.value),i=p(c),l.attrName=i,l.attrValue=n,l.keepAttr=!0,l.forceKeepAttr=void 0,Vt("uponSanitizeAttribute",t,l),n=l.attrValue,!l.forceKeepAttr&&(Ut(c,t),l.keepAttr))if(b(/\/>/i,n))Ut(c,t);else{At&&(n=h(n,ot," "),n=h(n,rt," "));var m=t.nodeName.toLowerCase();if(Yt(m,i,n))try{d?t.setAttributeNS(d,c,n):t.setAttribute(c,n),u(a.removed)}catch(t){}}}Vt("afterSanitizeAttributes",t,null)}},Zt=function t(e){var a=void 0,n=qt(e);for(Vt("beforeSanitizeShadowDOM",e,null);a=n.nextNode();)Vt("uponSanitizeShadowNode",a,null),Kt(a)||(a.content instanceof r&&t(a.content),Xt(a));Vt("afterSanitizeShadowDOM",e,null)};return a.sanitize=function(t,n){var o=void 0,l=void 0,c=void 0,d=void 0,u=void 0;if(t||(t="\x3c!--\x3e"),"string"!=typeof t&&!Gt(t)){if("function"!=typeof t.toString)throw v("toString is not a function");if("string"!=typeof(t=t.toString()))throw v("dirty is not a string, aborting")}if(!a.isSupported){if("object"===z(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof t)return e.toStaticHTML(t);if(Gt(t))return e.toStaticHTML(t.outerHTML)}return t}if(Tt||Pt(n),a.removed=[],"string"==typeof t&&(Et=!1),Et);else if(t instanceof s)1===(l=(o=Bt("\x3c!----\x3e")).ownerDocument.importNode(t,!0)).nodeType&&"BODY"===l.nodeName||"HTML"===l.nodeName?o=l:o.appendChild(l);else{if(!_t&&!At&&!kt&&-1===t.indexOf("<"))return Y&&Dt?Y.createHTML(t):t;if(!(o=Bt(t)))return _t?null:X}o&&xt&&Ht(o.firstChild);for(var m=qt(Et?t:o);c=m.nextNode();)3===c.nodeType&&c===d||Kt(c)||(c.content instanceof r&&Zt(c.content),Xt(c),d=c);if(d=null,Et)return t;if(_t){if(St)for(u=et.call(o.ownerDocument);o.firstChild;)u.appendChild(o.firstChild);else u=o;return $t&&(u=at.call(i,u,!0)),u}var p=kt?o.outerHTML:o.innerHTML;return At&&(p=h(p,ot," "),p=h(p,rt," ")),Y&&Dt?Y.createHTML(p):p},a.setConfig=function(t){Pt(t),Tt=!0},a.clearConfig=function(){jt=null,Tt=!1},a.isValidAttribute=function(t,e,a){jt||Pt({});var n=p(t),i=p(e);return Yt(n,i,a)},a.addHook=function(t,e){"function"==typeof e&&(it[t]=it[t]||[],m(it[t],e))},a.removeHook=function(t){it[t]&&u(it[t])},a.removeHooks=function(t){it[t]&&(it[t]=[])},a.removeAllHooks=function(){it={}},a}()}()},334:t=>{t.exports=class{constructor(t,e){this.database=t.database(),this.collection=e}async create(t,e,a=null){null==a&&(a=this.collection);let n=this.database.ref(a+"/"+t);await n.set(e)}async getDataRealtimeAdded(t,e=null){null==e&&(e=this.collection);let a=this.database.ref(e);await a.on("child_added",(function(e,a){var n=e.val();t(n)}))}async getAll(t=null){null==t&&(t=this.collection);let e=this.database.ref(t),a=[];return await e.orderByChild("name").once("value").then((t=>{t.forEach((t=>{let e=t.val();a.push({...e})}))})),a}async lastIdWithCallback(t,e=null){null==e&&(e=this.collection),this.database.ref(e).limitToLast(1).on("child_added",(function(e){var a=e.val().id+1;t(a)}))}async update(t,e,a=null){null==a&&(a=this.collection),await this.database.ref(a+"/"+t).update(e)}async delete(t,e=null){null==e&&(e=this.collection),await this.database.ref(e+"/"+t).remove()}async search(t,e,a,n=null){null==n&&(n=this.collection),this.database.ref(n).orderByChild(t).startAt(e).endAt(e+"").on("child_added",(function(t){var e=t.val();a(e)}))}async searchUniqExact(t,e,a,n=null){null==n&&(n=this.collection),this.database.ref(n).orderByChild(t).equalTo(e).limitToFirst(1).on("child_added",(function(t){var e=t.val();a(e)}))}async searchUniq(t,e,a,n=null){null==n&&(n=this.collection),this.database.ref(n).orderByChild(t).startAt(e).endAt(e+"").limitToFirst(1).on("child_added",(function(t){var e=t.val();a(e)}))}async deleteAll(t=null){null==t&&(t=this.collection),await this.database.ref(t).remove()}}},8115:t=>{t.exports=class{constructor(t,e){this.admin=t,this.collection=e}async create(t){return(await this.admin.firestore().collection(this.collection).add(t)).id}async getAll(t=null){let e;e=null==t?await this.admin.firestore().collection(this.collection).orderBy("name","asc").limit(1e3).get():await this.admin.firestore().collection(this.collection).where("category","==",t).orderBy("name","asc").limit(1e3).get();let a=[];return e.forEach((t=>{let e=t.id,n=t.data();a.push({id:e,...n})})),a}async getAllWithLimit(t=100){let e;e=await this.admin.firestore().collection(this.collection).orderBy("create_at","desc").limit(t).get();let a=[];return e.forEach((t=>{let e=t.id,n=t.data();a.push({id:e,...n})})),a}async getById(t){const e=await this.admin.firestore().collection(this.collection).doc(t).get();return e.exists?{id:e.id,...await e.data()}:{}}async update(t,e){return await this.admin.firestore().collection(this.collection).doc(t).update(e)}async delete(t){return await this.admin.firestore().collection(this.collection).doc(t).delete()}async getDateTime(){return await this.admin.firestore.FieldValue.serverTimestamp()}getRef(){return this.admin.firestore().collection(this.collection)}getRealtime(t,e,a,n){return t.onSnapshot((t=>{t.docChanges().forEach((t=>{let i=t.doc.id,o=t.doc.data();"added"===t.type&&e({id:i,...o}),"modified"===t.type&&a({id:i,...o}),"removed"===t.type&&n({id:i,...o})}),(t=>{}))}))}getRealtimeAdded(t,e){return t.onSnapshot((t=>{t.docChanges().forEach((t=>{let a=t.doc.id,n=t.doc.data();"added"===t.type&&e({id:a,...n})}),(t=>{}))}))}async override(t,e){let a=this.admin.firestore().collection(this.collection).doc(t);return await a.set(e,{merge:!0})}async removeField(t,e){const a=await this.admin.firestore().collection(this.collection).doc(t);let n={};return n[e]=this.admin.firestore.FieldValue.delete(),await a.update(n)}async increment(t,e,a){const n=await this.admin.firestore().collection(this.collection).doc(t);let i={};i[e]=this.admin.firestore.FieldValue.increment(a),await n.update(i)}async decrement(t,e,a){const n=await this.admin.firestore().collection(this.collection).doc(t);let i={};i[e]=this.admin.firestore.FieldValue.increment(-a),await n.update(i)}}}},e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,a),i.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";var t=a(8115),e=a.n(t),n=a(7856),i=a.n(n);function o(t){let e=0;return e=Number.isInteger(t)?t.toString():t,Number.isNaN(e)?0:e.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1.")}function r(t){return t?t.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()})):""}let l=null;var s=a(334),c=a.n(s);let d=null;let u={items:0,totall:0,requestProducts:[]},m=!0,p=[],f=null;const h=new class{constructor(t,e){return f||(f=this),this.myTransactionAction=e,this.productAction=t,this.myCard=new class{simpleCard({id:t,urlImage:e,nameImage:a,name:n,price:i,stok:l}){let s="";return s=l<=0?'<div class="js-button-empty">\n            <button type="button" class="btn btn-light" disabled>Habis</button>\n        </div>':' <div class="js-button-add-first">\n            <button type="button" class="btn btn-primary js-add-only" disabled>Tambah</button>\n        </div>\n        <div class="btn-group btn-group-sm js-button-group" role="group" aria-label="Second group" style="display:none">\n            <button type="button" class="btn btn-secondary  js-remove">-</button>\n            <input class="js-subTotal text-center text-muted" style="max-width:48px" value="0" disabled/>\n            <button type="button" class="btn btn-secondary js-add">+</button>\n        </div>',`<div class="col-lg-4 col-6 mb-4">\n        <div id="${t}" class="card-product-item">\n            <a class="card-product-link">\n               \x3c!-- <div class="card-product-hover">\n                    <div class="card-product-hover-content"><i class="fas fa-plus fa-3x"></i></div>\n                </div> --!>\n                <img class="img-fluid lozad"  src="/assets/img/400x300.jpg" data-src="${e}" data-src-ref="${a}" width="100%" alt="${a}"/>                        \n            </a>\n            <div class="card-product-caption">\n                <div class="card-product-caption-heading">${r(n)}</div>\n                <div class="card-product-caption-subheading text-muted">Rp ${o(i)},-</div>\n                <div class="mt-3 text-center">\n                ${s}\n                </div>\n        </div>\n    </div>`}noData(){return'<div class="col text-center mb-5 h4">Tidak Ada Product</div>'}},f}async initLazyLoad(){let t=$("img.lozad");for(let e of t){let t=$(e).data("srcRef");await this.productAction.checkImage(t).then((t=>{$(e).attr("src",t)}))}}async generateCard(t,e){if(0==e.length)return t.empty(),void t.append(this.myCard.noData());for(var a of(t.empty(),e)){let e="/assets/img/400x300.jpg";p.push({id:a.id,stok:a.stok,ambil:0,price:a.price_sell,final_price:a.price_sell}),t.append(this.myCard.simpleCard({id:a.id,urlImage:e,nameImage:a.image,name:a.name,price:a.price_sell,stok:a.stok}))}}async renderProducts(t,e){let a=[];for(let n of t)"product"==n.style&&"categories"==n.content&&a.push(e[n.content_id].ns);let n=[];for(let t of a){const e=$("#list-"+t);let a=await this.productAction.getProducts(t);await this.generateCard(e,a),n=n.concat(a)}return n}handleButtonSetItems(){let t=$(".js-add-only");$(".js-add-only").on("click",(function(t){let e=$(t.target).parents(".card-product-item");e.find(".js-button-add-first").hide(),e.find(".js-button-group").show();const a=p.find((function(t){return t.id==e[0].id}));if(a.stok>0){a.stok--,a.ambil++,u.items++,$("#total-items").text(u.items),u.totall+=parseInt(a.price);let t=o(u.totall);$("#total-prices").text(t),$(`#${e[0].id} .js-subTotal`).val(a.ambil)}else alert("stok habis");u.items>0&&m&&($("#btn-totall").fadeIn(500),$("#wa-button").fadeOut(500),m=!1)})),$(".js-add").on("click",(function(t){let e=$(t.target).parents(".card-product-item");const a=p.find((function(t){return t.id==e[0].id}));if(a.stok>0){a.stok--,a.ambil++,u.items++,$("#total-items").text(u.items),u.totall+=parseInt(a.price);let t=o(u.totall);$("#total-prices").text(t),$(`#${e[0].id} .js-subTotal`).val(a.ambil)}else alert("stok habis");u.items>0&&m&&($("#btn-totall").fadeIn(500),$("#wa-button").fadeOut(500),m=!1)})),$(".js-remove").on("click",(function(t){let e=$(t.target).parents(".card-product-item");const a=p.find((function(t){return t.id==e[0].id}));a.ambil>0?(a.stok++,a.ambil--,u.items--,$("#total-items").text(u.items),u.totall-=parseInt(a.price),$("#total-prices").text(o(u.totall)),$(`#${e[0].id} .js-subTotal`).val(a.ambil)):alert("item sudah kosong"),u.items<=0&&(m||($("#btn-totall").fadeOut(500),$("#wa-button").fadeIn(500),m=!0)),0==a.ambil&&(e.find(".js-button-add-first").show(),e.find(".js-button-group").hide())})),t.prop("disabled",!1)}renderShowDetail(t){$(".card-product-link").on("click",(async function(e){let a=$(e.target).parents(".card-product-item");const n=t.find((function(t){return t.id==a[0].id}));let i=$(e.target).attr("src");$("#modal-image").attr("src",i),$("#modal-title").html(n.name),$("#modal-description").html("<pre>"+n.description+"</pre>"),$("#detail-product").modal("show")}))}handleButtonConfirm(t,e){let a=[];$("#btn-totall").on("click",(function(){let e=p.filter((function(t){return t.ambil>0})).map((function(e){let a=t.find((function(t){return t.id==e.id}));return{id:a.id,name:a.name,price:a.price_sell,final_price:a.price_sell,items:e.ambil}}));e.length>0&&$("#table-product-requests").empty();const n=$("#table-product-requests");e.forEach((t=>{const e=t.items*t.price;n.append(`<tr><td><div><b>${t.name}</b></div>\n                    <small>${o(t.items)} x</small>\n                    <small> @${o(t.price)}</small></td>\n                    <td>${o(e)}</td></tr>`)})),a=e;let i=window.localStorage.getItem("name"),r=window.localStorage.getItem("nowa");$("#input-name").val(i),$("#input-wa").val(r),$("#last-totall").text(o(u.totall)),$("#list-requests").modal("show")})),$("#btn-lanjut-proses").on("click",(async function(){$("#list-requests").modal("hide"),$("#modal-confirm").modal("show"),$("#btn-confirm-loading").hide()})),$("#btn-confirm").on("click",(async function(t){t.preventDefault();let n=i().sanitize($("#input-name").val(),{SAFE_FOR_TEMPLATES:!0}),l=i().sanitize($("#input-wa").val(),{SAFE_FOR_TEMPLATES:!0});if(n.length<3)return alert("Anda belum memasukkan nama, silakan isi nama terlebih dahulu"),void $("#input-name").focus();if(n.length>50)return alert("Maksimal 50 karakter, silakan isi nama dengan benar"),void $("#input-name").focus();if(l.length<10||l.length>13)return alert("Anda belum memasukkan no Wa dengan benar, silakan isi nomor WA terlebih dahulu"),void $("#input-wa").focus();window.localStorage.setItem("name",n),window.localStorage.setItem("nowa",l),$("#btn-confirm").hide(),$("#btn-confirm-loading").show();try{await f.myTransactionAction.create({uid:"",name:n,wa:l,status:0,items:a})}catch(t){console.log(t)}let s="\n",c="Hallo,\nSaya *"+r(n)+"* , tertarik pada:"+s+s;a.forEach((t=>{c+="*"+t.name+"* :"+s+t.items+" x @"+t.price+" = "+t.items*t.price+s+s})),c+="Total *Rp"+o(u.totall)+",-*"+s+s,$("#btn-confirm").show(),$("#btn-confirm-loading").hide(),$("#modal-confirm").modal("hide"),function(t,e){var a,n,i="http://";i+=(n=!1,a=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(n=!0),n?"api":"web"),i+=".whatsapp.com/send?phone="+t+"&text="+encodeURI(e),window.open(i)}(e,c)}))}}(new class{constructor(t,e="prod"){return d||(d=this),this.myStorage=new class{constructor(t,e="prod"){this.firebase=t,this.env=e,this.storageRefImage="prod"==e?t.storage().ref("images"):t.storage().ref("images-test")}async checkExistImage(t,e){await this.storageRefImage.child(t).getDownloadURL().then((function(t){e(!0,t)}),(function(t){e(!1,t)}))}async getURL(t,e){await this.storageRefImage.child(t).getDownloadURL().then((function(t){e(!0,t)}),(function(t){e(!1,t)}))}async getURLImage(t,e,a){await this.storageRefImage.child(t).getDownloadURL().then((function(t){a(t)}),(function(t){a(e)}))}async getURLImageWithDefautProduct(t,e){await this.storageRefImage.child(t).getDownloadURL().then((function(t){e(t)}),(function(t){e("/assets/img/400x300.jpg")}))}async uploadImage(t,e){let a=""+t.name,n=null;n="prod"==this.env?await this.firebase.storage().ref("images/"+a):await this.firebase.storage().ref("images-test/"+a),await n.put(t).on("state_changed",(t=>{const a=Math.round(t.bytesTransferred/t.totalBytes*100);e(a,"")}),(t=>{}),(()=>{e(100,a)}))}async uploadWithDataURL(t,e){let a=null;a="prod"==this.env?await this.firebase.storage().ref("images/"+e):await this.firebase.storage().ref("images-test/"+e),await a.putString(t,"data_url").then((t=>{})).catch((t=>{window.alert(t)}))}}(t,e),this.myData=new(c())(t,"products"),this.env=e,d}async getProducts(t="products"){let e;return e="prod"==this.env?await this.myData.getAll(t):await this.myData.getAll(t+"-test"),e}async checkImage(t){return await new Promise((async function(e,a){await d.myStorage.checkExistImage(t,(function(t,a){t&&e(a)}))}))}}(firebase,configPage.env),new class{constructor(t,a="prod",n=null){return l||(l=this),this.mystore="prod"==a?new(e())(t,"/transaction"):new(e())(t,"/transaction-test"),this.productAction=n,l}async create({uid:t,name:e,wa:a,items:n}){let i=(o=e)?o.replace(/\w\S*/g,(function(t){return t.toLowerCase()})):"";var o;let r=await l.mystore.getDateTime();return await l.mystore.create({create_at:r,update_at:r,confirmed_at:null,name:i,wa:a,uid:t,items:n,status:0})}async getAll(){return await l.mystore.getAllWithLimit()}async getRealtime(t){let e=l.mystore.getRef();return await l.mystore.getRealtimeAdded(e,(function(e){t(e)}))}async delete(t){await l.mystore.delete(t)}async getById(t){return await l.mystore.getById(t)}async setStatusCancel(t){let e=await l.mystore.getDateTime();await l.mystore.update(t,{status:2,update_at:e})}async remove(t){return await l.mystore.delete(t)}async confirmTransaction(t){let e=!1,a=await l.getById(t);for(let t of a.items)await l.productAction.takeStok(t.id,t.items);let n=await l.mystore.getDateTime();return await l.mystore.override(t,{status:1,update_at:n,confirmed_at:n}).then((()=>{e=!0,alert("Data berhasil disimpan")})).catch((async t=>{alert(t);for(let t of a.items)await l.productAction.takeStok(t.id,t.items,!0)})),e}async updateItems(t,e){let a=await l.mystore.getDateTime();return await l.mystore.update(t,{items:e,update_at:a})}}(firebase,configPage.env));$((async function(){$(window).on("beforeunload",(function(){$("body").hide()})),setTimeout((function(){$("body").addClass("loaded")}),500),null!=configPage.wa_setup&&$("#wa-button").floatingWhatsApp({phone:configPage.wa_setup.wa,size:"50px",popupMessage:configPage.wa_setup.popupMessage,message:configPage.wa_setup.message,showPopup:!0,showOnIE:!1,position:"right"});let t=await h.renderProducts(configPage.layouts,configPage.categories);h.handleButtonSetItems(),h.initLazyLoad(),h.renderShowDetail(t),h.handleButtonConfirm(t,configPage.wa_setup.wa)}))})()})();